<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Happy Birthday ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    background:#000;
    color:#fff;
    font-family:'Courier New',monospace;
    margin:0;
    overflow:hidden;
}
#canvas{position:absolute;}
#message-container{
    position:absolute;
    left:20px;
    top:18%;
    z-index:10;
}
.text{
    font-size:18px;
    border-right:2px solid #fff;
    white-space:nowrap;
    overflow:hidden;
    width:0;
    margin-bottom:10px;
}
@keyframes typing{from{width:0}to{width:100%}}
@keyframes blink{50%{border-color:transparent}}

#playBtn{
    position:fixed;
    bottom:20px;
    right:20px;
    padding:10px 15px;
    background:#ff4081;
    color:white;
    border:none;
    border-radius:6px;
    cursor:pointer;
    z-index:20;
}
</style>
</head>
<body>

<button id="playBtn" onclick="playMusic()">‚ñ∂ Play Music</button>

<audio id="bgm" loop>
<source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3" type="audio/mpeg">
</audio>

<div id="message-container"></div>
<canvas id="canvas"></canvas>

<script>
function playMusic(){
 document.getElementById("bgm").play();
 document.getElementById("playBtn").style.display="none";
}

// Name from URL
const params=new URLSearchParams(window.location.search);
const name=params.get("name")||"Special One";

// Canvas setup
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

// Tree
function drawTree(x,y,len,angle,w){
 ctx.beginPath();
 ctx.save();
 ctx.strokeStyle="#4d2600";
 ctx.lineWidth=w;
 ctx.translate(x,y);
 ctx.rotate(angle*Math.PI/180);
 ctx.moveTo(0,0);
 ctx.lineTo(0,-len);
 ctx.stroke();

 if(len<10){
  ctx.font="16px Arial";
  ctx.fillText("‚ù§Ô∏è",0,-len);
  ctx.restore();return;
 }
 drawTree(0,-len,len*0.75,angle-20,w*0.7);
 drawTree(0,-len,len*0.75,angle+20,w*0.7);
 ctx.restore();
}

let grow=0;
function animateTree(){
 if(grow<120){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawTree(canvas.width/2+80,canvas.height-40,grow,0,5);
  grow++;
  requestAnimationFrame(animateTree);
 }else{
  startTyping();
  fireworks();
 }
}

// Typing messages
const messages=[
 `Hey ${name} üíï`,
 "Happy Birthday üéÇ",
 "May Allah bless you üòá",
 "You make my world brighter ‚ú®",
 "Just saying... I care about you ‚ù§Ô∏è",
 "Hope your day is as beautiful as you üíñ"
];

function startTyping(){
 const box=document.getElementById("message-container");
 messages.forEach((m,i)=>{
  setTimeout(()=>{
   const d=document.createElement("div");
   d.className="text";
   d.innerText=m;
   d.style.animation="typing 2s steps(30,end) forwards, blink .5s step-end infinite";
   box.appendChild(d);
  },i*2500);
 });
}

// Fireworks
let particles=[];
function fireworks(){
 setInterval(()=>{
  for(let i=0;i<30;i++){
   particles.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height/2,
    r:Math.random()*2+1,
    dx:(Math.random()-.5)*4,
    dy:(Math.random()-.5)*4,
    life:60
   });
  }
 },1200);

 function animate(){
  ctx.fillStyle="rgba(0,0,0,0.15)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  particles.forEach((p,i)=>{
   ctx.fillStyle=`hsl(${Math.random()*360},100%,60%)`;
   ctx.beginPath();
   ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
   ctx.fill();
   p.x+=p.dx;p.y+=p.dy;p.life--;
   if(p.life<=0)particles.splice(i,1);
  });
  requestAnimationFrame(animate);
 }
 animate();
}

animateTree();
onresize=()=>{canvas.width=innerWidth;canvas.height=innerHeight;}
</script>
</body>
</html>
